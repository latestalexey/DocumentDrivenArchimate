<!DOCTYPE html>
<html>
<head>

  <meta charset="utf-8">
  <title>d3js_archimate</title>
  <link rel="stylesheet" href="app.css">

  <!-- external libraries -->
  <script src="lib/d3.v3.min.js"></script>
  <script src="lib/jquery-2.1.4.min.js"></script>

  <!-- The user interface is mainly based on Polymer Web-Components.-->
  <!-- See https://www.polymer-project.org/1.0/ for more info. -->
  <!-- Extensive Polymer Usage -->
  <script src="./bower_components/webcomponentsjs/webcomponents-lite.min.js"></script>
  <link rel="import" href="./bower_components/polymer/polymer.html" />
  <link rel="import" href="./bower_components/paper-dialog/paper-dialog.html" />
  <link rel="import" href="./bower_components/paper-button/paper-button.html" />
  <link rel="import" href="./bower_components/iron-icons/iron-icons.html">
  <link rel="import" href="./bower_components/iron-pages/iron-pages.html" />
  <link rel="import" href="./bower_components/paper-toast/paper-toast.html" />
  <link rel="import" href="./bower_components/iron-flex-layout/classes/iron-flex-layout.html" />
  <link rel="import" href="./bower_components/paper-toolbar/paper-toolbar.html" />
  <link rel="import" href="./bower_components/paper-tabs/paper-tabs.html" />
  <link rel="import" href="./bower_components/paper-menu/paper-menu.html" />
  <link rel="import" href="./bower_components/paper-menu/paper-submenu.html" />
  <link rel="import" href="./bower_components/paper-dropdown-menu/paper-dropdown-menu.html" />
  <link rel="import" href="./bower_components/paper-menu-button/paper-menu-button.html" />
  <link rel="import" href="./bower_components/paper-icon-button/paper-icon-button.html" />
  <link rel="import" href="./bower_components/paper-listbox/paper-listbox.html" />
  <link rel="import" href="./bower_components/paper-item/paper-item.html" />
  <link rel="import" href="./bower_components/paper-input/paper-input.html" />
  <!-- import of custom elements -->
  <link rel="import" href="./lib/customelements.html" />

  <!--theme import-->
  <link rel="import" href="./theme/classical/classical.html" />

  <!-- main engine -->
  <script src="resources/archimate_configuration.js"></script>
  <script src="documentmodengine.js"></script>

  <script>
    //set to false for expiremental features
    documentmodengine.usersettings.viewonly = true;
  </script>


</head>

<body onload="">

<!--<script type="text/javascript" src="repository/mockup.json"></script>-->


<model-selection id="ms"></model-selection>
<div class="layout vertical">
  <div class="flex">
    <div class="layout horizontal">
      <div class="flex">
        <model-menu id="menu"></model-menu>
      </div>
      <div>
        <model-editor id="me"></model-editor>
      </div>
    </div>
  </div>
  <div>
    <model-zoom></model-zoom>
    <model-references id="mr"></model-references>
  </div>
</div>

<model-action-display id="md"></model-action-display>

<script>

  window.done = 0;

  function openFirstTime(){
    if(document.querySelector("#ms").open){
      document.querySelector("#ms").structure = {};
      document.querySelector("#ms").addEventListener("modelselected",function(e){
        console.log(ms.model);
        setTimeout(documentmodengine.prepareUrl,50,ms.model,'en');
      },false);
      document.querySelector("#ms").addEventListener("fileselected",function(e){
        console.log(ms.file);
        setTimeout(documentmodengine.prepareFile,50,e.detail.file,'en');
      },false);

    }else{
      setTimeout(openFirstTime,50)
    }
  }
  setTimeout(openFirstTime,50);

</script>

</body>


</html>
